<!-- Handlebars template for states -->
{{#each states}}
  <tr class="state" data-state="{{stabbrev}}" data-stat-1="{{evstat1}}" data-stat-2="{{evstat2}}" data-stars="{{stars}}" style="display:none;">
    <td class="state-name">{{stname}}</td>
    <td class="state-stat-1">{{evstat1}}</td>
    <td class="state-stat-2">{{evstat2}}</td>
    <td class="state-stars stars-{{stars_hb}}">
      <label class="sr-only sr-only-focusable">{{stars}} stars</label>
      <div class="star" aria-hidden="true"></div>
      <div class="star" aria-hidden="true"></div>
      <div class="star" aria-hidden="true"></div>
      <div class="star" aria-hidden="true"></div>
      <div class="star" aria-hidden="true"></div>
    </td>
  </tr>
  <tr class="state-text excerpt-only" data-state="{{stabbrev}}">
    <td colspan="3">
      {{#if stexcerpt}}
        <p class="state-excerpt">
          {{stexcerpt}}
        </p>
      {{/if}}
      {{#if sttext}}
        <p class="state-full">
          {{sttext}}
        </p>
      {{/if}}
      {{#if until}}
        <p class="expires">
          Protections start to expire on {{until}}
        </p>
      {{/if}}
    </td>
    <td></td>
  </tr>
  <tr class="state-details excerpt-only" data-state="{{stabbrev}}">
    <td colspan="4">
      <button class="expand-state-details btn" data-state="{{stabbrev}}">
        CLICK TO LEARN MORE
      </button>
      <div class="state-details-list">
        {{! no nonpayment }}
        {{#istrue plcnonpbool}}
          <div class="state-policy">
            <label class="icon-{{plcnonpbool}} plcnonpbool">
              <span class="sr-only">Icon: state has implemented </span>No nonpayment
            </label>
            {{#if plcnonptext}}
              <p>{{plcnonptext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! no filings }}
        {{#istrue plcnofilbool}}
          <div class="state-policy">
            <label class="icon-{{plcnofilbool}} plcnofilbool">
              <span class="sr-only">Icon: state has implemented </span>No filings</label>
            {{#if plcnofiltext}}
              <p>{{plcnofiltext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! no new evictions }}
        {{#istrue plcnonewbool}}
          <div class="state-policy">
            <label class="icon-{{plcnonewbool}} plcnonewbool">
              <span class="sr-only">Icon: state has implemented </span>No new evictions</label>
            {{#if plcnonewtext}}
              <p>{{plcnonewtext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! No enforcement }}
        {{#istrue plcnoenfbool}}
          <div class="state-policy">
            <label class="icon-{{plcnoenfbool}} plcnoenfbool">
              <span class="sr-only">Icon: state has implemented </span>No enforcement</label>
            {{#if plcnoenftext}}
              <p>{{plcnoenftext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! No hearings }}
        {{#istrue plcnohearbool}}
          <div class="state-policy">
            <label class="icon-{{plcnohearbool}} plcnohearbool">
              <span class="sr-only">Icon: state has implemented </span>No hearings</label>
            {{#if plcnoheartext}}
              <p>{{plcnoheartext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! plcnofilbool }}
        {{#istrue plctldbool}}
          <div class="state-policy">
            <label class="icon-{{plctldbool}} plctldbool">
              <span class="sr-only">Icon: state has implemented </span>Tolled</label>
            {{#if plctldtext}}
              <p>{{plctldtext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! plcnofilbool }}
        {{#istrue plclatfbool}}
          <div class="state-policy">
            <label class="icon-{{plclatfbool}} plclatfbool">
              <span class="sr-only">Icon: state has implemented </span>No late fee</label>
            {{#if plclatftext}}
              <p>{{plclatftext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! arrears }}
        {{#istrue plcarsbool}}
          <div class="state-policy">
            <label class="icon-{{plcarsbool}} plcarsbool">
              <span class="sr-only">Icon: state has implemented </span>Arrears</label>
            {{#if plcarstext}}
              <p>{{plcarstext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! no shutoffs }}
        {{#istrue plcnoshbool}}
          <div class="state-policy">
            <label class="icon-{{plcnoshbool}} plcnoshbool">
              <span class="sr-only">Icon: state has implemented </span>No shutoffs or free reconnect</label>
            {{#if plcnoshtext}}
              <p>{{plcnoshtext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! No foreclosure }}
        {{#istrue plcnofcbool}}
          <div class="state-policy">
            <label class="icon-{{plcnofcbool}} plcnofcbool">
              <span class="sr-only">Icon: state has implemented </span>No foreclosures</label>
            {{#if plcnofctext}}
              <p>{{plcnofctext}}</p>
            {{/if}}
          </div>
        {{/istrue}}
        {{! false list starts here! }}
        {{! no nonpayment }}
        {{#isfalse plcnonpbool}}
          <div class="state-policy">
            <label class="icon-{{plcnonpbool}} plcnonpbool">
              <span class="sr-only">Icon: state has not implemented </span>No nonpayment
            </label>
            {{#if plcnonptext}}
              <p>{{plcnonptext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! no filings }}
        {{#isfalse plcnofilbool}}
          <div class="state-policy">
            <label class="icon-{{plcnofilbool}} plcnofilbool">
              <span class="sr-only">Icon: state has not implemented </span>No filings</label>
            {{#if plcnofiltext}}
              <p>{{plcnofiltext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! no new evictions }}
        {{#isfalse plcnonewbool}}
          <div class="state-policy">
            <label class="icon-{{plcnonewbool}} plcnonewbool">
              <span class="sr-only">Icon: state has not implemented </span>No new evictions</label>
            {{#if plcnonewtext}}
              <p>{{plcnonewtext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! No enforcement }}
        {{#isfalse plcnoenfbool}}
          <div class="state-policy">
            <label class="icon-{{plcnoenfbool}} plcnoenfbool">
              <span class="sr-only">Icon: state has not implemented </span>No enforcement</label>
            {{#if plcnoenftext}}
              <p>{{plcnoenftext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! No hearings }}
        {{#isfalse plcnohearbool}}
          <div class="state-policy">
            <label class="icon-{{plcnohearbool}} plcnohearbool">
              <span class="sr-only">Icon: state has not implemented </span>No hearings</label>
            {{#if plcnoheartext}}
              <p>{{plcnoheartext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! plcnofilbool }}
        {{#isfalse plctldbool}}
          <div class="state-policy">
            <label class="icon-{{plctldbool}} plctldbool">
              <span class="sr-only">Icon: state has not implemented </span>Tolled</label>
            {{#if plctldtext}}
              <p>{{plctldtext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! plcnofilbool }}
        {{#isfalse plclatfbool}}
          <div class="state-policy">
            <label class="icon-{{plclatfbool}} plclatfbool">
              <span class="sr-only">Icon: state has not implemented </span>No late fees</label>
            {{#if plclatftext}}
              <p>{{plclatftext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! arrears }}
        {{#isfalse plcarsbool}}
          <div class="state-policy">
            <label class="icon-{{plcarsbool}} plcarsbool">
              <span class="sr-only">Icon: state has not implemented </span>Arrears</label>
            {{#if plcarstext}}
              <p>{{plcarstext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! no shutoffs }}
        {{#isfalse plcnoshbool}}
          <div class="state-policy">
            <label class="icon-{{plcnoshbool}} plcnoshbool">
              <span class="sr-only">Icon: state has not implemented </span>No shutoffs or free reconnect</label>
            {{#if plcnoshtext}}
              <p>{{plcnoshtext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        {{! No foreclosure }}
        {{#isfalse plcnofcbool}}
          <div class="state-policy">
            <label class="icon-{{plcnofcbool}} plcnofcbool">
              <span class="sr-only">Icon: state has not implemented </span>No foreclosures</label>
            {{#if plcnofctext}}
              <p>{{plcnofctext}}</p>
            {{/if}}
          </div>
        {{/isfalse}}
        <div class="last-updated">
          Last updated {{updated}}
        </div>
      </div>
      <button class="collapse-state-details btn" data-state="{{stabbrev}}" style="display:none;">CLICK TO COLLAPSE</button>
    </td>
  </tr>
  </div>
{{/each}}
