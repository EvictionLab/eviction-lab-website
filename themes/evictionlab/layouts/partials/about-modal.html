<!-- Modal setup for bios -->

{{ if eq .Params.childof "alumni-bios" }} 
{{/* trigger if person is alumni  */}}

<div class="bio-thumb-wrapper">

    <div class="bio-container alumni d-flex flex-column align-items-center">
      <picture>
        <!--<source media="(max-width: 799px)" srcset='/images/bios/grayscale{{ strings.TrimPrefix "/images/bios" .Params.thumb }}'>-->
        {{ if in .Params.thumb "images/" }}
          <source media="(min-width: 800px)" srcset="{{ .Params.thumb }}">
          <img alt="{{ .Params.title }} photo" class="bio-thumb" src="{{ .Params.thumb }}" />
        {{ else }}
          <source media="(min-width: 800px)" srcset="{{.RelPermalink}}{{ .Params.thumb }}">
          <img alt="{{ .Params.title }} photo" class="bio-thumb" src="{{.RelPermalink}}{{ .Params.thumb }}" />
        {{ end }}  
      </picture>
      <h3>{{ .Params.title }}</h3>
      <p class="bio-position pb-1">{{ .Params.position }}</p>
      <p class="bio-position mt-1">{{ .Params.newposition }}</p> 
    </div>

</div>
{{ end }}
<!-- Student researchers --------------------->

{{ if eq .Params.childof "student-researcher-bios" }}

  {{ partial "about-thumbs" . }}
 
{{ else }}
  {{ partial "about-thumbs" . }}
{{ end }}

<div class="modal fade" id="modal-{{ .Params.abbrev }}" tabindex="-1" role="dialog" aria-labelledby="teamBioModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {{ if in .Params.image "images/" }}
        <div class="left-column" style="background-image: url({{ .Params.image }})"></div>
        {{ else }}
        <div class="left-column" style="background-image: url('{{.RelPermalink}}{{ .Params.image }}')"></div>
        {{ end }}
        <div class="right-column">
          <div class="modal-body">                    
            <h3>{{ .Params.title }}</h3>
            <p class="bio-position">{{ .Params.position }}</p>
            <div class="bio-content">{{ .Content }}</div>
          </div>
          <div class="modal-footer">
              <div class="bio-nav prev">
                {{ $.Scratch.Set "hasNext" false }}
                {{ if .NextInSection }}
                  {{ if and .NextInSection.Params.abbrev .NextInSection.Params.childof }}
                    {{ if eq .NextInSection.Params.childof .Params.childof }}
                      {{ $.Scratch.Set "hasNext" true }}
                      <a class="red" data-toggle="modal" data-target="#modal-{{ .NextInSection.Params.abbrev }}" data-dismiss="modal" href="#">
                        {{ range (where .Site.RegularPages "Params.childof" ("about")) }}
                          {{ if eq .Params.type "meta" }} 
                            <i class="fa fa-chevron-left">&nbsp;</i>{{ .Params.back }}
                          {{ end }}
                        {{ end }}    
                      </a>
                    {{ end }}
                  {{ end }}
                {{ end }}
              </div>
              {{ $sectionPages := where .Site.RegularPages "Params.childof" .Params.childof }}
              {{ $.Scratch.Set "hasPrev" false }}
              {{ if .PrevInSection }}
                {{ if .PrevInSection.Params.childof }}
                  {{ if eq .PrevInSection.Params.childof .Params.childof }}
                    {{ $.Scratch.Set "hasPrev" true }}
                  {{ end }}
                {{ end }}
              {{ end }}
              {{ if and ($.Scratch.Get "hasNext") (or ($.Scratch.Get "hasPrev") (ge (len $sectionPages) 1)) }}
              <div class="bio-nav red separator"> | </div>
              {{ end }}
              <div class="bio-nav next">
                {{ if $.Scratch.Get "hasPrev" }}
                  <a class="red" data-toggle="modal" data-target="#modal-{{ .PrevInSection.Params.abbrev }}" data-dismiss="modal" href="#">
                    {{ range (where .Site.RegularPages "Params.childof" ("about")) }}
                      {{ if eq .Params.type "meta" }} 
                        {{ .Params.forward }}&nbsp;&nbsp;<i class="fa fa-chevron-right"></i>
                      {{ end }}
                    {{ end }}    
                  </a>
                {{ else if ge (len $sectionPages) 1 }}
                  {{ range first 1 $sectionPages }}
                  <a class="red" data-toggle="modal" data-target="#modal-{{ .Params.abbrev }}" data-dismiss="modal" href="#">
                      {{ end }}
                  {{ range (where .Site.RegularPages "Params.childof" ("about")) }}
                    {{ if eq .Params.type "meta" }}         
                      {{ .Params.forward }}&nbsp;&nbsp;<i class="fa fa-chevron-right"></i>
                  </a>
                      {{ end }}
                    {{ end }}  

                
                {{ end }}
              </div>
            <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
          </div>
        </div>
    </div>
  </div>
</div>