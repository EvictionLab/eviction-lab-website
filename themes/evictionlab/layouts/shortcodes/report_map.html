<div class="section section--map">
  <div class="section__content">
    <div class="details">
      <p class="description">{{ .Inner }}</p>
    </div>
    <div class="visual">
      <div id="map" class="map"></div>
    </div>
    <div class="section__toggle"></div>
    <div class="legend legend--choropleth">
      <div class="legend-item">
        <div class="legend-item__label">
          <span class="legend__date"></span>
        </div>
      </div>
      <div class="legend__gradient"></div>
      <div class="legend__gradient-labels"></div>
    </div>
    <p class="footnote"></p>
  </div>
  <script>
    window.addEventListener("load", function () {
      var geojson = {{ .Get "shapes" }};
      var csv = {{ .Get "data" }};
      var rootEl = '.section--map'
      Elab.Section.init('map', rootEl, { 
        geojson: geojson, 
        csv: csv,  
        metrics: {
          "month_filings": "Filings", 
          "month_rate": "Filing Rate", 
          "month_diff": "Relative To Average"
        }, 
        dateCol: "month_date"
      })
    })
  </script>
</div>
